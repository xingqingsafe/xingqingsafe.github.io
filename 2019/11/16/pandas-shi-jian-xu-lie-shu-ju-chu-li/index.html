<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Pandas 时间序列数据处理, talk is cheap,show me the code">
    <meta name="description" content="Pandas 时间序列数据处理
介绍Pandas 是非常著名的开源数据处理库，我们可以通过它完成对数据集进行快速读取、转换、过滤、分析等一系列操作。同样，Pandas 已经被证明为是非常强大的用于处理时间序列数据的工具。本节将介绍所有 Pa">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Pandas 时间序列数据处理 | 星晴</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">星晴</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">星晴</div>
        <div class="logo-desc">
            
            PuTTY 本无树，MinGW 亦非台
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewbox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/>
    </svg>
</a>
        
    </nav>

</header>





<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/19.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        Pandas 时间序列数据处理
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/机器学习/" target="_blank">
                                <span class="chip bg-color">机器学习</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2019-11-16
                </div>

                
				
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="Pandas-时间序列数据处理"><a href="#Pandas-时间序列数据处理" class="headerlink" title="Pandas 时间序列数据处理"></a>Pandas 时间序列数据处理</h2><hr>
<h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><p>Pandas 是非常著名的开源数据处理库，我们可以通过它完成对数据集进行快速读取、转换、过滤、分析等一系列操作。同样，Pandas 已经被证明为是非常强大的用于处理时间序列数据的工具。本节将介绍所有 Pandas 在时间序列数据上的处理方法。</p>
<h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>创建时间对象</li>
<li>时间索引对象</li>
<li>时间算术方法</li>
</ul>
<hr>
<h3 id="创建时间对象"><a href="#创建时间对象" class="headerlink" title="创建时间对象"></a>创建时间对象</h3><p>在 Pandas 中关于时间序列的常见对象有 6 种，分别是 Timestamp（时间戳）、DatetimeIndex（时间戳索引）、Period（时间段）、PeriodIndex（时间段索引）、以时间为元素的 Series 和以及以时间索引的 DataFrame。本小节学习如何创建以上对象。</p>
<h4 id="创建时间戳"><a href="#创建时间戳" class="headerlink" title="创建时间戳"></a>创建时间戳</h4><p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Timestamp.html" target="_blank" rel="noopener"> <em>Timestamp</em></a> 时间戳表示时间轴上的某一点，以下不同代码都可以生成相同时间戳。</p>
<p>创建时间为 2018 年 10 月 1 日的时间戳。</p>
<p>In [1]:</p>
<pre><code>import pandas as pd

pd.Timestamp(2018, 10, 1)
</code></pre><p>Out[1]:</p>
<pre><code>Timestamp(&#39;2018-10-01 00:00:00&#39;)
</code></pre><p>也可以使创建的时间精确到时分秒。</p>
<p>In [2]:</p>
<pre><code>pd.Timestamp(&quot;2018-10-1 10:00:1&quot;)
</code></pre><p>Out[2]:</p>
<pre><code>Timestamp(&#39;2018-10-01 10:00:01&#39;)
</code></pre><p>In [3]:</p>
<pre><code>from datetime import datetime

pd.Timestamp(datetime(2018, 10, 1))
</code></pre><p>Out[3]:</p>
<pre><code>Timestamp(&#39;2018-10-01 00:00:00&#39;)
</code></pre><h4 id="创建时间段"><a href="#创建时间段" class="headerlink" title="创建时间段"></a>创建时间段</h4><p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Period.html" target="_blank" rel="noopener"> <em>Period</em></a> 时间段表示时间轴上的某一区间，以下代码都可以生成相同时间段。</p>
<p>In [4]:</p>
<pre><code>pd.Period(&#39;2018-10&#39;)
</code></pre><p>Out[4]:</p>
<pre><code>Period(&#39;2018-10&#39;, &#39;M&#39;)
</code></pre><p><code>Period()</code> 函数后面通常有两个参数，第二个 <code>freq</code> 参数决定时间段的分割长度。</p>
<p>创建频率为日的时间段。</p>
<p>In [5]:</p>
<pre><code>pd.Period(&#39;2018-10&#39;, freq=&#39;Y&#39;)

</code></pre><p>Out[5]:</p>
<pre><code>Period(&#39;2018&#39;, &#39;A-DEC&#39;)

</code></pre><p>In [6]:</p>
<pre><code>pd.Period(&#39;2018-10&#39;, freq=&#39;D&#39;)

</code></pre><p>Out[6]:</p>
<pre><code>Period(&#39;2018-10-01&#39;, &#39;D&#39;)

</code></pre><h4 id="创建时间元素的-Series"><a href="#创建时间元素的-Series" class="headerlink" title="创建时间元素的 Series"></a>创建时间元素的 Series</h4><p>Pandas 中常用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_datetime.html" target="_blank" rel="noopener"><code>to_datetime()</code></a> 函数可以创建以时间为元素的 Series。</p>
<p>创建一个 Series，以三个时间的字符串作为元素。</p>
<p>In [7]:</p>
<pre><code>df = [&#39;2018-08-01&#39;, &#39;2018-09-01&#39;, &#39;2018-10-01&#39;]
pd.to_datetime(df)

</code></pre><p>Out[7]:</p>
<pre><code>DatetimeIndex([&#39;2018-08-01&#39;, &#39;2018-09-01&#39;, &#39;2018-10-01&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)

</code></pre><p>可以使用多种方法创建时间元素的 Series。</p>
<p>In [8]:</p>
<pre><code>df = pd.Series([&#39;Sep 30, 2018&#39;, &#39;2018-10-1&#39;, None])
pd.to_datetime(df)

</code></pre><p>Out[8]:</p>
<pre><code>0   2018-09-30
1   2018-10-01
2          NaT
dtype: datetime64[ns]

</code></pre><p>In [9]:</p>
<pre><code>df = pd.DataFrame({&#39;year&#39;: [2017, 2018],
                   &#39;month&#39;: [9, 10],
                   &#39;day&#39;: [30, 1],
                   &#39;hour&#39;: [23, 0]})
pd.to_datetime(df)

</code></pre><p>Out[9]:</p>
<pre><code>0   2017-09-30 23:00:00
1   2018-10-01 00:00:00
dtype: datetime64[ns]

</code></pre><h4 id="创建时间索引"><a href="#创建时间索引" class="headerlink" title="创建时间索引"></a>创建时间索引</h4><p>要生成带有时间戳的索引，可以使用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DatetimeIndex.html" target="_blank" rel="noopener"><code>DatetimeIndex()</code></a> 构造函数，并传入列表或 Series 对象：</p>
<p>In [10]:</p>
<pre><code>dates = [&#39;2018-08-01&#39;, &#39;2018-09-01&#39;, &#39;2018-10-01&#39;]
index = pd.DatetimeIndex(dates)
index

</code></pre><p>Out[10]:</p>
<pre><code>DatetimeIndex([&#39;2018-08-01&#39;, &#39;2018-09-01&#39;, &#39;2018-10-01&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)

</code></pre><p>实际运用中我们经常需要大量的的时间戳的索引。可以使用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.date_range.html" target="_blank" rel="noopener"><code>date_range()</code></a> 和 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.bdate_range.html" target="_blank" rel="noopener"><code>bdate_range()</code></a> 来批量创建相同时间间隔的时间戳索引。</p>
<p>创建以 2018 年 9 月 30 日为开始的 250 条时间索引，相邻索引间隔时间长度为一个月。</p>
<p>In [11]:</p>
<pre><code>index = pd.date_range(&#39;2018-9-30&#39;, periods=250, freq=&#39;M&#39;)
index

</code></pre><p>Out[11]:</p>
<pre><code>DatetimeIndex([&#39;2018-09-30&#39;, &#39;2018-10-31&#39;, &#39;2018-11-30&#39;, &#39;2018-12-31&#39;,
               &#39;2019-01-31&#39;, &#39;2019-02-28&#39;, &#39;2019-03-31&#39;, &#39;2019-04-30&#39;,
               &#39;2019-05-31&#39;, &#39;2019-06-30&#39;,
               ...
               &#39;2038-09-30&#39;, &#39;2038-10-31&#39;, &#39;2038-11-30&#39;, &#39;2038-12-31&#39;,
               &#39;2039-01-31&#39;, &#39;2039-02-28&#39;, &#39;2039-03-31&#39;, &#39;2039-04-30&#39;,
               &#39;2039-05-31&#39;, &#39;2039-06-30&#39;],
              dtype=&#39;datetime64[ns]&#39;, length=250, freq=&#39;M&#39;)

</code></pre><p>创建以 2018 年 10 月 1 日为开始的 111 条时间索引，相邻索引间隔时间长度为一个工作日。</p>
<p>In [12]:</p>
<pre><code>index = pd.bdate_range(&#39;2018-10-1&#39;, periods=111)
index

</code></pre><p>Out[12]:</p>
<pre><code>DatetimeIndex([&#39;2018-10-01&#39;, &#39;2018-10-02&#39;, &#39;2018-10-03&#39;, &#39;2018-10-04&#39;,
               &#39;2018-10-05&#39;, &#39;2018-10-08&#39;, &#39;2018-10-09&#39;, &#39;2018-10-10&#39;,
               &#39;2018-10-11&#39;, &#39;2018-10-12&#39;,
               ...
               &#39;2019-02-19&#39;, &#39;2019-02-20&#39;, &#39;2019-02-21&#39;, &#39;2019-02-22&#39;,
               &#39;2019-02-25&#39;, &#39;2019-02-26&#39;, &#39;2019-02-27&#39;, &#39;2019-02-28&#39;,
               &#39;2019-03-01&#39;, &#39;2019-03-04&#39;],
              dtype=&#39;datetime64[ns]&#39;, length=111, freq=&#39;B&#39;)

</code></pre><p>在 <code>date_range()</code> 和 <code>bdate_range()</code> 中可以巧妙使用 start，end， periods，freq 等参数的各种组合轻松批量创建时间索引。</p>
<p>在 2017 年 10 月 1 日到 2018 年 10 月 1 日间，每隔一周创建一条索引。</p>
<p>In [13]:</p>
<pre><code>start = datetime(2017, 10, 1)
end = datetime(2018, 10, 1)
rng = pd.date_range(start, end, freq=&#39;W&#39;)
rng

</code></pre><p>Out[13]:</p>
<pre><code>DatetimeIndex([&#39;2017-10-01&#39;, &#39;2017-10-08&#39;, &#39;2017-10-15&#39;, &#39;2017-10-22&#39;,
               &#39;2017-10-29&#39;, &#39;2017-11-05&#39;, &#39;2017-11-12&#39;, &#39;2017-11-19&#39;,
               &#39;2017-11-26&#39;, &#39;2017-12-03&#39;, &#39;2017-12-10&#39;, &#39;2017-12-17&#39;,
               &#39;2017-12-24&#39;, &#39;2017-12-31&#39;, &#39;2018-01-07&#39;, &#39;2018-01-14&#39;,
               &#39;2018-01-21&#39;, &#39;2018-01-28&#39;, &#39;2018-02-04&#39;, &#39;2018-02-11&#39;,
               &#39;2018-02-18&#39;, &#39;2018-02-25&#39;, &#39;2018-03-04&#39;, &#39;2018-03-11&#39;,
               &#39;2018-03-18&#39;, &#39;2018-03-25&#39;, &#39;2018-04-01&#39;, &#39;2018-04-08&#39;,
               &#39;2018-04-15&#39;, &#39;2018-04-22&#39;, &#39;2018-04-29&#39;, &#39;2018-05-06&#39;,
               &#39;2018-05-13&#39;, &#39;2018-05-20&#39;, &#39;2018-05-27&#39;, &#39;2018-06-03&#39;,
               &#39;2018-06-10&#39;, &#39;2018-06-17&#39;, &#39;2018-06-24&#39;, &#39;2018-07-01&#39;,
               &#39;2018-07-08&#39;, &#39;2018-07-15&#39;, &#39;2018-07-22&#39;, &#39;2018-07-29&#39;,
               &#39;2018-08-05&#39;, &#39;2018-08-12&#39;, &#39;2018-08-19&#39;, &#39;2018-08-26&#39;,
               &#39;2018-09-02&#39;, &#39;2018-09-09&#39;, &#39;2018-09-16&#39;, &#39;2018-09-23&#39;,
               &#39;2018-09-30&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;W-SUN&#39;)

</code></pre><p>从 2018 年 10 月 1 日向前每隔一个工作日创建一条索引，共 250 条。</p>
<p>In [14]:</p>
<pre><code>
</code></pre><pre><code>pd.bdate_range(end=end, periods=250)

</code></pre><p>Out[14]:</p>
<pre><code>DatetimeIndex([&#39;2017-10-17&#39;, &#39;2017-10-18&#39;, &#39;2017-10-19&#39;, &#39;2017-10-20&#39;,
               &#39;2017-10-23&#39;, &#39;2017-10-24&#39;, &#39;2017-10-25&#39;, &#39;2017-10-26&#39;,
               &#39;2017-10-27&#39;, &#39;2017-10-30&#39;,
               ...
               &#39;2018-09-18&#39;, &#39;2018-09-19&#39;, &#39;2018-09-20&#39;, &#39;2018-09-21&#39;,
               &#39;2018-09-24&#39;, &#39;2018-09-25&#39;, &#39;2018-09-26&#39;, &#39;2018-09-27&#39;,
               &#39;2018-09-28&#39;, &#39;2018-10-01&#39;],
              dtype=&#39;datetime64[ns]&#39;, length=250, freq=&#39;B&#39;)

</code></pre><p>同理，时间段也能作为索引使用，需要用到 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.period_range.html" target="_blank" rel="noopener"><code>period_range()</code></a>。</p>
<p>从 2018 年 9 月 30 日向后创建 666 条索引，相邻索引间隔时间长度为一天。</p>
<p>In [15]:</p>
<pre><code>pi = pd.period_range(&#39;2018-9-30&#39;, periods=666)
pi

</code></pre><p>Out[15]:</p>
<pre><code>PeriodIndex([&#39;2018-09-30&#39;, &#39;2018-10-01&#39;, &#39;2018-10-02&#39;, &#39;2018-10-03&#39;,
             &#39;2018-10-04&#39;, &#39;2018-10-05&#39;, &#39;2018-10-06&#39;, &#39;2018-10-07&#39;,
             &#39;2018-10-08&#39;, &#39;2018-10-09&#39;,
             ...
             &#39;2020-07-17&#39;, &#39;2020-07-18&#39;, &#39;2020-07-19&#39;, &#39;2020-07-20&#39;,
             &#39;2020-07-21&#39;, &#39;2020-07-22&#39;, &#39;2020-07-23&#39;, &#39;2020-07-24&#39;,
             &#39;2020-07-25&#39;, &#39;2020-07-26&#39;],
            dtype=&#39;period[D]&#39;, length=666, freq=&#39;D&#39;)

</code></pre><h4 id="创建以时间为索引的-Series-对象"><a href="#创建以时间为索引的-Series-对象" class="headerlink" title="创建以时间为索引的 Series 对象"></a>创建以时间为索引的 Series 对象</h4><p>以时间为索引的 Series 对象指的是在该 Series 中，元素的索引不再是 1、2、3、4、5……这样的序号，而是有序的日期和时间。</p>
<p>In [16]:</p>
<pre><code>import numpy as np

dates = [pd.Timestamp(&#39;2018-08-01&#39;), pd.Timestamp(&#39;2018-09-01&#39;),
         pd.Timestamp(&#39;2018-10-01&#39;)]  # 创建三个时间元素。
ts = pd.Series(np.random.randn(3), dates)   # 创建索引值为随机数的 Series 对象。
ts

</code></pre><p>Out[16]:</p>
<pre><code>2018-08-01    0.869426
2018-09-01    1.998180
2018-10-01    0.386960
dtype: float64

</code></pre><p>同样，时间段也能作为索引。</p>
<p>In [18]:</p>
<pre><code>periods = [pd.Period(&#39;2018-08&#39;), pd.Period(&#39;2018-09&#39;), pd.Period(&#39;2018-10&#39;)]
ts = pd.Series(np.random.randn(3), periods)
ts

</code></pre><p>Out[18]:</p>
<pre><code>2018-08   -0.469977
2018-09    0.076098
2018-10    0.119560
Freq: M, dtype: float64

</code></pre><p>我们可以批量创建索引后再创建以时间为索引的 Series 对象。创建索引值为随机数的 Series 对象，长度与 rng 长度相同。</p>
<p>In [19]:</p>
<pre><code>ts = pd.Series(np.random.randn(len(rng)), index=rng)
ts

</code></pre><p>Out[19]:</p>
<pre><code>2017-10-01    0.493787
2017-10-08   -0.688910
2017-10-15    0.448156
2017-10-22   -1.042401
2017-10-29   -0.157431
2017-11-05    0.946544
2017-11-12   -0.009933
2017-11-19    1.809738
2017-11-26    0.780451
2017-12-03   -0.671147
2017-12-10   -1.085384
2017-12-17   -0.396987
2017-12-24    0.516356
2017-12-31   -1.339113
2018-01-07    0.091994
2018-01-14    0.466957
2018-01-21    0.404413
2018-01-28    0.424614
2018-02-04   -1.523700
2018-02-11   -0.112411
2018-02-18   -0.742847
2018-02-25   -2.820375
2018-03-04   -1.026152
2018-03-11    0.249747
2018-03-18   -0.948177
2018-03-25    0.484366
2018-04-01    0.290852
2018-04-08    0.398359
2018-04-15   -0.632353
2018-04-22   -0.731030
2018-04-29   -0.443699
2018-05-06    1.394748
2018-05-13   -0.480585
2018-05-20   -0.432828
2018-05-27    0.214926
2018-06-03    1.062762
2018-06-10   -0.989706
2018-06-17   -0.014890
2018-06-24   -0.060750
2018-07-01    0.255050
2018-07-08    0.602239
2018-07-15    0.784231
2018-07-22    0.498010
2018-07-29   -0.075643
2018-08-05   -2.080412
2018-08-12   -1.452536
2018-08-19    0.757943
2018-08-26    0.459837
2018-09-02    0.654742
2018-09-09    0.924585
2018-09-16   -1.751716
2018-09-23    1.972103
2018-09-30    0.651826
Freq: W-SUN, dtype: float64

</code></pre><p>时间段也能作为索引创建 DataFrame 对象。在 2017 年第一季度和 2018 年第四季度之间每隔一个季度创建一条索引。</p>
<p>In [20]:</p>
<pre><code>prng = pd.period_range(&#39;2017Q1&#39;, &#39;2018Q4&#39;, freq=&#39;Q-NOV&#39;)
# 行索引为时间段索引，列索引为 A。
ps = pd.DataFrame(np.random.rand(len(prng)), columns=[
                  &#39;A&#39;], index=prng)
ps

</code></pre><p>Out[20]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">A</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2017Q1</td>
<td style="text-align:left">0.342835</td>
</tr>
<tr>
<td style="text-align:right">2017Q2</td>
<td style="text-align:left">0.774213</td>
</tr>
<tr>
<td style="text-align:right">2017Q3</td>
<td style="text-align:left">0.695786</td>
</tr>
<tr>
<td style="text-align:right">2017Q4</td>
<td style="text-align:left">0.032892</td>
</tr>
<tr>
<td style="text-align:right">2018Q1</td>
<td style="text-align:left">0.239562</td>
</tr>
<tr>
<td style="text-align:right">2018Q2</td>
<td style="text-align:left">0.116051</td>
</tr>
<tr>
<td style="text-align:right">2018Q3</td>
<td style="text-align:left">0.900067</td>
</tr>
<tr>
<td style="text-align:right">2018Q4</td>
<td style="text-align:left">0.270152</td>
</tr>
</tbody>
</table>
<h3 id="时间索引对象处理"><a href="#时间索引对象处理" class="headerlink" title="时间索引对象处理"></a>时间索引对象处理</h3><p>以时间戳为索引的 Series、DataFrame 对象具有与普通列表近乎相同的操作，且更具智能化。</p>
<h4 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h4><p>简单查找。</p>
<p>In [21]:</p>
<pre><code>ts

</code></pre><p>Out[21]:</p>
<pre><code>2017-10-01    0.493787
2017-10-08   -0.688910
2017-10-15    0.448156
2017-10-22   -1.042401
2017-10-29   -0.157431
2017-11-05    0.946544
2017-11-12   -0.009933
2017-11-19    1.809738
2017-11-26    0.780451
2017-12-03   -0.671147
2017-12-10   -1.085384
2017-12-17   -0.396987
2017-12-24    0.516356
2017-12-31   -1.339113
2018-01-07    0.091994
2018-01-14    0.466957
2018-01-21    0.404413
2018-01-28    0.424614
2018-02-04   -1.523700
2018-02-11   -0.112411
2018-02-18   -0.742847
2018-02-25   -2.820375
2018-03-04   -1.026152
2018-03-11    0.249747
2018-03-18   -0.948177
2018-03-25    0.484366
2018-04-01    0.290852
2018-04-08    0.398359
2018-04-15   -0.632353
2018-04-22   -0.731030
2018-04-29   -0.443699
2018-05-06    1.394748
2018-05-13   -0.480585
2018-05-20   -0.432828
2018-05-27    0.214926
2018-06-03    1.062762
2018-06-10   -0.989706
2018-06-17   -0.014890
2018-06-24   -0.060750
2018-07-01    0.255050
2018-07-08    0.602239
2018-07-15    0.784231
2018-07-22    0.498010
2018-07-29   -0.075643
2018-08-05   -2.080412
2018-08-12   -1.452536
2018-08-19    0.757943
2018-08-26    0.459837
2018-09-02    0.654742
2018-09-09    0.924585
2018-09-16   -1.751716
2018-09-23    1.972103
2018-09-30    0.651826
Freq: W-SUN, dtype: float64

</code></pre><p>查找前 10 条索引记录。</p>
<p>In [22]:</p>
<pre><code>ts[:10]

</code></pre><p>Out[22]:</p>
<pre><code>2017-10-01    0.493787
2017-10-08   -0.688910
2017-10-15    0.448156
2017-10-22   -1.042401
2017-10-29   -0.157431
2017-11-05    0.946544
2017-11-12   -0.009933
2017-11-19    1.809738
2017-11-26    0.780451
2017-12-03   -0.671147
Freq: W-SUN, dtype: float64

</code></pre><p>每隔 1 条记录查找 1 条索引记录。</p>
<p>In [23]:</p>
<pre><code>ts[::2]

</code></pre><p>Out[23]:</p>
<pre><code>2017-10-01    0.493787
2017-10-15    0.448156
2017-10-29   -0.157431
2017-11-12   -0.009933
2017-11-26    0.780451
2017-12-10   -1.085384
2017-12-24    0.516356
2018-01-07    0.091994
2018-01-21    0.404413
2018-02-04   -1.523700
2018-02-18   -0.742847
2018-03-04   -1.026152
2018-03-18   -0.948177
2018-04-01    0.290852
2018-04-15   -0.632353
2018-04-29   -0.443699
2018-05-13   -0.480585
2018-05-27    0.214926
2018-06-10   -0.989706
2018-06-24   -0.060750
2018-07-08    0.602239
2018-07-22    0.498010
2018-08-05   -2.080412
2018-08-19    0.757943
2018-09-02    0.654742
2018-09-16   -1.751716
2018-09-30    0.651826
Freq: 2W-SUN, dtype: float64

</code></pre><p>查找第 0、2、6 条索引记录。</p>
<p>In [24]:</p>
<pre><code>ts[[0, 2, 6]]

</code></pre><p>Out[24]:</p>
<pre><code>2017-10-01    0.493787
2017-10-15    0.448156
2017-11-12   -0.009933
dtype: float64

</code></pre><p>基于时间索引的精确查找。查找索引为 2018 年 9 月 30 日的值。</p>
<p>In [25]:</p>
<pre><code>
</code></pre><pre><code>ts[&quot;09/30/2018&quot;]

</code></pre><p>Out[25]:</p>
<pre><code>0.651825687842145

</code></pre><p>In [26]:</p>
<pre><code>ts[datetime(2018, 9, 30)]

</code></pre><p>Out[26]:</p>
<pre><code>0.651825687842145

</code></pre><p>基于索引的范围查找。查找索引时间在 2017 年内的所有记录。</p>
<p>In [27]:</p>
<pre><code>ts[&quot;2017&quot;]

</code></pre><p>Out[27]:</p>
<pre><code>2017-10-01    0.493787
2017-10-08   -0.688910
2017-10-15    0.448156
2017-10-22   -1.042401
2017-10-29   -0.157431
2017-11-05    0.946544
2017-11-12   -0.009933
2017-11-19    1.809738
2017-11-26    0.780451
2017-12-03   -0.671147
2017-12-10   -1.085384
2017-12-17   -0.396987
2017-12-24    0.516356
2017-12-31   -1.339113
Freq: W-SUN, dtype: float64

</code></pre><p>查找索引时间在 2018 年 9 月内的所有记录。</p>
<p>In [28]:</p>
<pre><code>ts[&quot;2018-9&quot;]

</code></pre><p>Out[28]:</p>
<pre><code>2018-09-02    0.654742
2018-09-09    0.924585
2018-09-16   -1.751716
2018-09-23    1.972103
2018-09-30    0.651826
Freq: W-SUN, dtype: float64

</code></pre><p>以时间段为索引的 DataFrame 对象的查找规则与以时间戳的相同。</p>
<p>In [29]:</p>
<pre><code>ps

</code></pre><p>Out[29]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">A</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2017Q1</td>
<td style="text-align:left">0.342835</td>
</tr>
<tr>
<td style="text-align:right">2017Q2</td>
<td style="text-align:left">0.774213</td>
</tr>
<tr>
<td style="text-align:right">2017Q3</td>
<td style="text-align:left">0.695786</td>
</tr>
<tr>
<td style="text-align:right">2017Q4</td>
<td style="text-align:left">0.032892</td>
</tr>
<tr>
<td style="text-align:right">2018Q1</td>
<td style="text-align:left">0.239562</td>
</tr>
<tr>
<td style="text-align:right">2018Q2</td>
<td style="text-align:left">0.116051</td>
</tr>
<tr>
<td style="text-align:right">2018Q3</td>
<td style="text-align:left">0.900067</td>
</tr>
<tr>
<td style="text-align:right">2018Q4</td>
<td style="text-align:left">0.270152</td>
</tr>
</tbody>
</table>
<p>2018 年的第一个季度规定为 2017 年的 12 月初到 2018 年的 2 月末。</p>
<p>查找 2017 年内的所有季度的记录。</p>
<p>In [30]:</p>
<pre><code>ps[&quot;2017&quot;]

</code></pre><p>Out[30]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">A</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2017Q1</td>
<td style="text-align:left">0.342835</td>
</tr>
<tr>
<td style="text-align:right">2017Q2</td>
<td style="text-align:left">0.774213</td>
</tr>
<tr>
<td style="text-align:right">2017Q3</td>
<td style="text-align:left">0.695786</td>
</tr>
<tr>
<td style="text-align:right">2017Q4</td>
<td style="text-align:left">0.032892</td>
</tr>
<tr>
<td style="text-align:right">2018Q1</td>
<td style="text-align:left">0.239562</td>
</tr>
</tbody>
</table>
<p>查找 2017 年 12 月 31 日前的所有季度的记录。</p>
<p>In [31]:</p>
<pre><code>ps[:datetime(2017, 12, 31)]

</code></pre><p>Out[31]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">A</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2017Q1</td>
<td style="text-align:left">0.342835</td>
</tr>
<tr>
<td style="text-align:right">2017Q2</td>
<td style="text-align:left">0.774213</td>
</tr>
<tr>
<td style="text-align:right">2017Q3</td>
<td style="text-align:left">0.695786</td>
</tr>
<tr>
<td style="text-align:right">2017Q4</td>
<td style="text-align:left">0.032892</td>
</tr>
<tr>
<td style="text-align:right">2018Q1</td>
<td style="text-align:left">0.239562</td>
</tr>
</tbody>
</table>
<p>查找 2018 年 6 月内的所有季度的记录。</p>
<p>In [32]:</p>
<pre><code>ps[&quot;2018-06&quot;]

</code></pre><p>Out[32]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">A</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2018Q3</td>
<td style="text-align:left">0.900067</td>
</tr>
</tbody>
</table>
<h4 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h4><p>使用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.truncate.html" target="_blank" rel="noopener"><code>truncate()</code></a> 切下 2017 年 11 月 26 日与 2018 年 4 月 29 日间的记录。</p>
<p>In [33]:</p>
<pre><code>ts.truncate(before=&#39;11/26/2017&#39;, after=&#39;4/29/2018&#39;)

</code></pre><p>Out[33]:</p>
<pre><code>2017-11-26    0.780451
2017-12-03   -0.671147
2017-12-10   -1.085384
2017-12-17   -0.396987
2017-12-24    0.516356
2017-12-31   -1.339113
2018-01-07    0.091994
2018-01-14    0.466957
2018-01-21    0.404413
2018-01-28    0.424614
2018-02-04   -1.523700
2018-02-11   -0.112411
2018-02-18   -0.742847
2018-02-25   -2.820375
2018-03-04   -1.026152
2018-03-11    0.249747
2018-03-18   -0.948177
2018-03-25    0.484366
2018-04-01    0.290852
2018-04-08    0.398359
2018-04-15   -0.632353
2018-04-22   -0.731030
2018-04-29   -0.443699
Freq: W-SUN, dtype: float64

</code></pre><h4 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h4><p>将时间索引 Series 中的值向后和向前移动。其方法是 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.shift.html" target="_blank" rel="noopener"><code>shift()</code></a>。</p>
<p>In [34]:</p>
<pre><code>ts = ts[:5]  # 取前 5 条数据方便观察。
ts

</code></pre><p>Out[34]:</p>
<pre><code>2017-10-01    0.493787
2017-10-08   -0.688910
2017-10-15    0.448156
2017-10-22   -1.042401
2017-10-29   -0.157431
Freq: W-SUN, dtype: float64

</code></pre><p>将元素列向下移动一条。</p>
<p>In [35]:</p>
<pre><code>ts.shift(1)

</code></pre><p>Out[35]:</p>
<pre><code>2017-10-01         NaN
2017-10-08    0.493787
2017-10-15   -0.688910
2017-10-22    0.448156
2017-10-29   -1.042401
Freq: W-SUN, dtype: float64

</code></pre><p>除了元素可以被移动，索引本身也能被移动，需要加上 <code>freq</code> 参数。将索引列向上移动一条：</p>
<p>In [36]:</p>
<pre><code>ts.shift(1, freq=&#39;W&#39;)

</code></pre><p>Out[36]:</p>
<pre><code>2017-10-08    0.493787
2017-10-15   -0.688910
2017-10-22    0.448156
2017-10-29   -1.042401
2017-11-05   -0.157431
Freq: W-SUN, dtype: float64

</code></pre><h4 id="重采样"><a href="#重采样" class="headerlink" title="重采样"></a>重采样</h4><p>重采样可以通俗得理解为改变时间索引的个数，通过增大或减小相邻索引的时间间隔以达到减小或增加索引数量的效果，在 Pandas 中使用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html" target="_blank" rel="noopener"><code>resample()</code></a> 函数。</p>
<p>下采样：增大时间间隔，减少记录的数量。创建从 2018 年 10 月 1 日开始的日间隔索引的 Series 。</p>
<p>In [37]:</p>
<pre><code>rng = pd.date_range(&#39;10/1/2018&#39;, periods=10, freq=&#39;D&#39;)
ts = pd.Series(np.random.randint(0, 50, len(rng)), index=rng)
ts

</code></pre><p>Out[37]:</p>
<pre><code>2018-10-01    24
2018-10-02     9
2018-10-03    26
2018-10-04    37
2018-10-05    40
2018-10-06    32
2018-10-07    45
2018-10-08    22
2018-10-09    37
2018-10-10     8
Freq: D, dtype: int64

</code></pre><p>原先索引的日间隔被扩大为周间隔，并以周末为索引采样点，采样点的索引值为所有未被索引值的和。</p>
<p>In [38]:</p>
<pre><code>ts.resample(&#39;W&#39;).sum()

</code></pre><p>Out[38]:</p>
<pre><code>2018-10-07    213
2018-10-14     67
Freq: W-SUN, dtype: int64

</code></pre><p>同样也能使采样点的索引值为所有未被索引值的平均值。</p>
<p>In [39]:</p>
<pre><code>ts.resample(&#39;W&#39;).mean()

</code></pre><p>Out[39]:</p>
<pre><code>2018-10-07    30.428571
2018-10-14    22.333333
Freq: W-SUN, dtype: float64

</code></pre><p>使用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.resample.Resampler.ohlc.html" target="_blank" rel="noopener"><code>ohlc()</code></a> 函数对所用未被采样值进行统计。</p>
<p>In [40]:</p>
<pre><code>ts.resample(&#39;W&#39;).ohlc()

</code></pre><p>Out[40]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">open</th>
<th style="text-align:left">high</th>
<th style="text-align:left">low</th>
<th style="text-align:left">close</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2018-10-07</td>
<td style="text-align:left">24</td>
<td style="text-align:left">45</td>
<td style="text-align:left">9</td>
<td style="text-align:left">45</td>
</tr>
<tr>
<td style="text-align:right">2018-10-14</td>
<td style="text-align:left">22</td>
<td style="text-align:left">37</td>
<td style="text-align:left">8</td>
<td style="text-align:left">8</td>
</tr>
</tbody>
</table>
<p>上采样：减小时间间隔频率，增加记录的数量。</p>
<p>原来间隔为日的索引列，间隔被缩小成 12 小时，增加采样点的值为空值。</p>
<p>In [41]:</p>
<pre><code>ts.resample(&#39;12H&#39;).asfreq()

</code></pre><p>Out[41]:</p>
<pre><code>2018-10-01 00:00:00    24.0
2018-10-01 12:00:00     NaN
2018-10-02 00:00:00     9.0
2018-10-02 12:00:00     NaN
2018-10-03 00:00:00    26.0
2018-10-03 12:00:00     NaN
2018-10-04 00:00:00    37.0
2018-10-04 12:00:00     NaN
2018-10-05 00:00:00    40.0
2018-10-05 12:00:00     NaN
2018-10-06 00:00:00    32.0
2018-10-06 12:00:00     NaN
2018-10-07 00:00:00    45.0
2018-10-07 12:00:00     NaN
2018-10-08 00:00:00    22.0
2018-10-08 12:00:00     NaN
2018-10-09 00:00:00    37.0
2018-10-09 12:00:00     NaN
2018-10-10 00:00:00     8.0
Freq: 12H, dtype: float64

</code></pre><p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.ffill.html" target="_blank" rel="noopener"><code>ffill()</code></a> 函数可以将新增的索引值以相邻的前一条索引值进行填充。</p>
<p>In [42]:</p>
<pre><code>ts.resample(&#39;12H&#39;).ffill()

</code></pre><p>Out[42]:</p>
<pre><code>2018-10-01 00:00:00    24
2018-10-01 12:00:00    24
2018-10-02 00:00:00     9
2018-10-02 12:00:00     9
2018-10-03 00:00:00    26
2018-10-03 12:00:00    26
2018-10-04 00:00:00    37
2018-10-04 12:00:00    37
2018-10-05 00:00:00    40
2018-10-05 12:00:00    40
2018-10-06 00:00:00    32
2018-10-06 12:00:00    32
2018-10-07 00:00:00    45
2018-10-07 12:00:00    45
2018-10-08 00:00:00    22
2018-10-08 12:00:00    22
2018-10-09 00:00:00    37
2018-10-09 12:00:00    37
2018-10-10 00:00:00     8
Freq: 12H, dtype: int64

</code></pre><h3 id="时间的算术方法"><a href="#时间的算术方法" class="headerlink" title="时间的算术方法"></a>时间的算术方法</h3><h4 id="常用时间的算术规则"><a href="#常用时间的算术规则" class="headerlink" title="常用时间的算术规则"></a>常用时间的算术规则</h4><p>下表是 Pandas 内建的一些时间类，常用于时间索引的位移。</p>
<p><img src="https://doc.shiyanlou.com/document-uid214893labid7506timestamp1543469398079.png" alt="img"></p>
<p>首先要导入 <code>pandas.tseries.offsets</code> 模块，Pandas 所有常用时间类都在该模块中。</p>
<p>In [43]:</p>
<pre><code>d = pd.Timestamp(2018, 10, 1, 10, 1, 1)
d

</code></pre><p>Out[43]:</p>
<pre><code>Timestamp(&#39;2018-10-01 10:01:01&#39;)

</code></pre><p>使用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.tseries.offsets.DateOffset.html" target="_blank" rel="noopener"><code>DateOffset()</code></a> 实现时间戳位移。</p>
<p>向后移动一个月零两天。</p>
<p>In [44]:</p>
<pre><code>from pandas.tseries.offsets import DateOffset

d + DateOffset(months=1, days=2)

</code></pre><p>Out[44]:</p>
<pre><code>Timestamp(&#39;2018-11-03 10:01:01&#39;)

</code></pre><p>也可以用时间戳加减常用时间类以实现时间戳位移。向前移动 10 个工作日。</p>
<p>In [45]:</p>
<pre><code>from pandas.tseries.offsets import BDay

d - 10 * BDay()

</code></pre><p>Out[45]:</p>
<pre><code>Timestamp(&#39;2018-09-17 10:01:01&#39;)

</code></pre><p>向后移动一个月末。</p>
<p>In [47]:</p>
<pre><code>from pandas.tseries.offsets import BMonthEnd

d + BMonthEnd()

</code></pre><p>Out[47]:</p>
<pre><code>Timestamp(&#39;2018-10-31 10:01:01&#39;)

</code></pre><p>个性化定制日期。虽然日历规定年末是 12 月，加入参数后相当于人为规定 2 月是年末。</p>
<p>向后移动到上两个年末。</p>
<p>In [48]:</p>
<pre><code>from pandas.tseries.offsets import YearEnd

d + YearEnd(month=2)

</code></pre><p>Out[48]:</p>
<pre><code>Timestamp(&#39;2019-02-28 10:01:01&#39;)

</code></pre><p>向前移动到上一个周四。</p>
<p>In [49]:</p>
<pre><code>from pandas.tseries.offsets import Week

d - Week(weekday=4)

</code></pre><p>Out[49]:</p>
<pre><code>Timestamp(&#39;2018-09-28 10:01:01&#39;)

</code></pre><p>可以使用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.tseries.offsets.DateOffset.rollforward.html" target="_blank" rel="noopener"><code>rollforward()</code></a> 将指定时间向前或向后移动到一个制定常用时间类的时间戳上。将时间移动到下一个月末：</p>
<p>In [50]:</p>
<pre><code>offset = BMonthEnd()
offset.rollforward(d)

</code></pre><p>Out[50]:</p>
<pre><code>Timestamp(&#39;2018-10-31 10:01:01&#39;)

</code></pre><p>将时间移动到上一个月末。</p>
<p>In [51]:</p>
<pre><code>offset.rollback(d)

</code></pre><p>Out[51]:</p>
<pre><code>Timestamp(&#39;2018-09-28 10:01:01&#39;)

</code></pre><p>偏移也同样适用于时间索引</p>
<p>In [52]:</p>
<pre><code>rng

</code></pre><p>Out[52]:</p>
<pre><code>DatetimeIndex([&#39;2018-10-01&#39;, &#39;2018-10-02&#39;, &#39;2018-10-03&#39;, &#39;2018-10-04&#39;,
               &#39;2018-10-05&#39;, &#39;2018-10-06&#39;, &#39;2018-10-07&#39;, &#39;2018-10-08&#39;,
               &#39;2018-10-09&#39;, &#39;2018-10-10&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)

</code></pre><p>所有的时间索引向后移动两日。</p>
<p>In [53]:</p>
<pre><code>
</code></pre><pre><code>rng + DateOffset(days=2)

</code></pre><p>Out[53]:</p>
<pre><code>DatetimeIndex([&#39;2018-10-03&#39;, &#39;2018-10-04&#39;, &#39;2018-10-05&#39;, &#39;2018-10-06&#39;,
               &#39;2018-10-07&#39;, &#39;2018-10-08&#39;, &#39;2018-10-09&#39;, &#39;2018-10-10&#39;,
               &#39;2018-10-11&#39;, &#39;2018-10-12&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)

</code></pre><p>所有的时间索引向后移动两个工作日。</p>
<p>In [54]:</p>
<pre><code>rng + 2*BDay()

</code></pre><p>Out[54]:</p>
<pre><code>DatetimeIndex([&#39;2018-10-03&#39;, &#39;2018-10-04&#39;, &#39;2018-10-05&#39;, &#39;2018-10-08&#39;,
               &#39;2018-10-09&#39;, &#39;2018-10-09&#39;, &#39;2018-10-09&#39;, &#39;2018-10-10&#39;,
               &#39;2018-10-11&#39;, &#39;2018-10-12&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=None)

</code></pre><p>所有的时间索引向后移动 15 分钟。</p>
<p>In [55]:</p>
<pre><code>from pandas.tseries.offsets import Minute

rng + Minute(15)

</code></pre><p>Out[55]:</p>
<pre><code>DatetimeIndex([&#39;2018-10-01 00:15:00&#39;, &#39;2018-10-02 00:15:00&#39;,
               &#39;2018-10-03 00:15:00&#39;, &#39;2018-10-04 00:15:00&#39;,
               &#39;2018-10-05 00:15:00&#39;, &#39;2018-10-06 00:15:00&#39;,
               &#39;2018-10-07 00:15:00&#39;, &#39;2018-10-08 00:15:00&#39;,
               &#39;2018-10-09 00:15:00&#39;, &#39;2018-10-10 00:15:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)

</code></pre><p>下列是常用时间系列频率参数，上面小节经常出现，现在以一个表格作详细说明。</p>
<table>
<thead>
<tr>
<th style="text-align:right">参数名</th>
<th style="text-align:right">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">B</td>
<td style="text-align:right">工作日频率</td>
</tr>
<tr>
<td style="text-align:right">C</td>
<td style="text-align:right">定制工作日频率</td>
</tr>
<tr>
<td style="text-align:right">D</td>
<td style="text-align:right">日历日频率</td>
</tr>
<tr>
<td style="text-align:right">W</td>
<td style="text-align:right">每周频率</td>
</tr>
<tr>
<td style="text-align:right">M</td>
<td style="text-align:right">月结束频率</td>
</tr>
<tr>
<td style="text-align:right">SM</td>
<td style="text-align:right">半月结束频率(15 个月和月末)</td>
</tr>
<tr>
<td style="text-align:right">BM</td>
<td style="text-align:right">业务月末频率</td>
</tr>
<tr>
<td style="text-align:right">CBM</td>
<td style="text-align:right">定制业务月末频率</td>
</tr>
<tr>
<td style="text-align:right">MS</td>
<td style="text-align:right">月起始频率</td>
</tr>
<tr>
<td style="text-align:right">sMs</td>
<td style="text-align:right">半月起始频率(第 1 和 15)</td>
</tr>
<tr>
<td style="text-align:right">BMS</td>
<td style="text-align:right">业务月开始频率</td>
</tr>
<tr>
<td style="text-align:right">CBMS</td>
<td style="text-align:right">定制商业月份开始频率</td>
</tr>
<tr>
<td style="text-align:right">Q</td>
<td style="text-align:right">四分频结束频率</td>
</tr>
<tr>
<td style="text-align:right">BQ</td>
<td style="text-align:right">业务四分之一频率</td>
</tr>
<tr>
<td style="text-align:right">QS</td>
<td style="text-align:right">四分频启动频率</td>
</tr>
<tr>
<td style="text-align:right">BQS</td>
<td style="text-align:right">业务季开始频率</td>
</tr>
<tr>
<td style="text-align:right">A</td>
<td style="text-align:right">年结束频率</td>
</tr>
<tr>
<td style="text-align:right">BA</td>
<td style="text-align:right">业务年结束频率</td>
</tr>
<tr>
<td style="text-align:right">AS</td>
<td style="text-align:right">年起始频率</td>
</tr>
<tr>
<td style="text-align:right">BAS</td>
<td style="text-align:right">业务年开始频率</td>
</tr>
<tr>
<td style="text-align:right">BH</td>
<td style="text-align:right">工作时间频率</td>
</tr>
<tr>
<td style="text-align:right">H</td>
<td style="text-align:right">每小时频率</td>
</tr>
<tr>
<td style="text-align:right">T, min</td>
<td style="text-align:right">分钟频率</td>
</tr>
<tr>
<td style="text-align:right">S</td>
<td style="text-align:right">次频</td>
</tr>
<tr>
<td style="text-align:right">L, ms</td>
<td style="text-align:right">毫秒</td>
</tr>
<tr>
<td style="text-align:right">U, uS</td>
<td style="text-align:right">微秒</td>
</tr>
<tr>
<td style="text-align:right">N</td>
<td style="text-align:right">纳秒</td>
</tr>
</tbody>
</table>
<p>使用常用频率参数组合创建时间索引。</p>
<p>创建 10 条以 2018 年 10 月 1 日为开始，间隔为 1 天 1 小时 1 分钟 10 微秒的时间索引。</p>
<p>In [ ]:</p>
<pre><code>pd.date_range(&quot;2018-10-1&quot;, periods=10, freq=&#39;1D1H1min10U&#39;)

</code></pre><p>In [ ]:</p>
<pre><code>
</code></pre><p>以下频率参数可以指定后缀以达到改变默认间隔点的效果。</p>
<p><img src="https://doc.shiyanlou.com/document-uid214893labid7506timestamp1543469470665.png" alt="img"></p>
<p>创建 10 条以 2018 年 10 月 1 日为开始，间隔为每周三的时间索引。</p>
<p>In [56]:</p>
<pre><code>pd.date_range(&quot;2018-10-1&quot;, periods=10, freq=&#39;W-WED&#39;)

</code></pre><p>Out[56]:</p>
<pre><code>DatetimeIndex([&#39;2018-10-03&#39;, &#39;2018-10-10&#39;, &#39;2018-10-17&#39;, &#39;2018-10-24&#39;,
               &#39;2018-10-31&#39;, &#39;2018-11-07&#39;, &#39;2018-11-14&#39;, &#39;2018-11-21&#39;,
               &#39;2018-11-28&#39;, &#39;2018-12-05&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;W-WED&#39;)

</code></pre><p>在使用特定频率（MonthEnd，MonthBegin，WeekEnd 等）的参数时，如果起始时间是刚好在频率点上，使用 <code>n</code>参数可以决定是否让该点参与计算。</p>
<p><code>n=1</code> 时参与计算。</p>
<p>In [57]:</p>
<pre><code>from pandas.tseries.offsets import MonthBegin

pd.Timestamp(&#39;2018-10-1&#39;) + MonthBegin(n=1)

</code></pre><p>Out[57]:</p>
<pre><code>Timestamp(&#39;2018-11-01 00:00:00&#39;)

</code></pre><p><code>n=0</code> 时不参与计算。</p>
<p>In [58]:</p>
<pre><code>pd.Timestamp(&#39;2018-10-1&#39;) + MonthBegin(n=0)

</code></pre><p>Out[58]:</p>
<pre><code>Timestamp(&#39;2018-10-01 00:00:00&#39;)

</code></pre><h4 id="下采样聚合"><a href="#下采样聚合" class="headerlink" title="下采样聚合"></a>下采样聚合</h4><p>下采样中的聚合是指下采样后，对未被采样到的点进行的一系列计算。</p>
<p>创建 100 个日历日为时间索引的 DataFrame，将其以月频率下采样。</p>
<p>In [59]:</p>
<pre><code>df = pd.DataFrame(np.random.rand(100, 3),
                  index=pd.date_range(&#39;10/1/2018&#39;, freq=&#39;D&#39;, periods=100),
                  columns=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;])
r = df.resample(&#39;M&#39;)
r

</code></pre><p>Out[59]:</p>
<pre><code>DatetimeIndexResampler [freq=&lt;MonthEnd&gt;, axis=0, closed=right, label=right, convention=start, base=0]

</code></pre><p>对未采样点求和，结果保存在采样点的值中。</p>
<p>In [60]:</p>
<pre><code>r.sum()

</code></pre><p>Out[60]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">A</th>
<th style="text-align:left">B</th>
<th style="text-align:left">C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2018-10-31</td>
<td style="text-align:left">15.831843</td>
<td style="text-align:left">15.593403</td>
<td style="text-align:left">13.834875</td>
</tr>
<tr>
<td style="text-align:right">2018-11-30</td>
<td style="text-align:left">16.388360</td>
<td style="text-align:left">14.547544</td>
<td style="text-align:left">16.558796</td>
</tr>
<tr>
<td style="text-align:right">2018-12-31</td>
<td style="text-align:left">17.184591</td>
<td style="text-align:left">14.223076</td>
<td style="text-align:left">16.141872</td>
</tr>
<tr>
<td style="text-align:right">2019-01-31</td>
<td style="text-align:left">4.254840</td>
<td style="text-align:left">4.041291</td>
<td style="text-align:left">5.459201</td>
</tr>
</tbody>
</table>
<p>在下采样后也能进行查找操作。选择 A、C 列后取均值计算。</p>
<p>In [61]:</p>
<pre><code>r[[&#39;A&#39;, &#39;C&#39;]].mean()

</code></pre><p>Out[61]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">A</th>
<th style="text-align:left">C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2018-10-31</td>
<td style="text-align:left">0.510705</td>
<td style="text-align:left">0.446286</td>
</tr>
<tr>
<td style="text-align:right">2018-11-30</td>
<td style="text-align:left">0.546279</td>
<td style="text-align:left">0.551960</td>
</tr>
<tr>
<td style="text-align:right">2018-12-31</td>
<td style="text-align:left">0.554342</td>
<td style="text-align:left">0.520706</td>
</tr>
<tr>
<td style="text-align:right">2019-01-31</td>
<td style="text-align:left">0.531855</td>
<td style="text-align:left">0.682400</td>
</tr>
</tbody>
</table>
<p>使用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.agg.html" target="_blank" rel="noopener"><code>agg()</code></a> 同时进行不同的计算。对采样结果进行取和与取均值计算。</p>
<p>In [62]:</p>
<pre><code>r.agg([np.sum, np.mean])

</code></pre><p>Out[62]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">A</th>
<th style="text-align:left">B</th>
<th style="text-align:left">C</th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right"></td>
<td style="text-align:left">sum</td>
<td style="text-align:left">mean</td>
<td style="text-align:left">sum</td>
<td style="text-align:left">mean</td>
<td style="text-align:left">sum</td>
<td style="text-align:left">mean</td>
</tr>
<tr>
<td style="text-align:right">2018-10-31</td>
<td style="text-align:left">15.831843</td>
<td style="text-align:left">0.510705</td>
<td style="text-align:left">15.593403</td>
<td style="text-align:left">0.503013</td>
<td style="text-align:left">13.834875</td>
<td style="text-align:left">0.446286</td>
</tr>
<tr>
<td style="text-align:right">2018-11-30</td>
<td style="text-align:left">16.388360</td>
<td style="text-align:left">0.546279</td>
<td style="text-align:left">14.547544</td>
<td style="text-align:left">0.484918</td>
<td style="text-align:left">16.558796</td>
<td style="text-align:left">0.551960</td>
</tr>
<tr>
<td style="text-align:right">2018-12-31</td>
<td style="text-align:left">17.184591</td>
<td style="text-align:left">0.554342</td>
<td style="text-align:left">14.223076</td>
<td style="text-align:left">0.458809</td>
<td style="text-align:left">16.141872</td>
<td style="text-align:left">0.520706</td>
</tr>
<tr>
<td style="text-align:right">2019-01-31</td>
<td style="text-align:left">4.254840</td>
<td style="text-align:left">0.531855</td>
<td style="text-align:left">4.041291</td>
<td style="text-align:left">0.505161</td>
<td style="text-align:left">5.459201</td>
<td style="text-align:left">0.682400</td>
</tr>
</tbody>
</table>
<p>选择 A 列，同时进行取和，取均值，取标准差计算。</p>
<p>In [63]:</p>
<pre><code>r[&#39;A&#39;].agg([np.sum, np.mean, np.std])

</code></pre><p>Out[63]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">sum</th>
<th style="text-align:left">mean</th>
<th style="text-align:left">std</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2018-10-31</td>
<td style="text-align:left">15.831843</td>
<td style="text-align:left">0.510705</td>
<td style="text-align:left">0.284486</td>
</tr>
<tr>
<td style="text-align:right">2018-11-30</td>
<td style="text-align:left">16.388360</td>
<td style="text-align:left">0.546279</td>
<td style="text-align:left">0.319620</td>
</tr>
<tr>
<td style="text-align:right">2018-12-31</td>
<td style="text-align:left">17.184591</td>
<td style="text-align:left">0.554342</td>
<td style="text-align:left">0.310248</td>
</tr>
<tr>
<td style="text-align:right">2019-01-31</td>
<td style="text-align:left">4.254840</td>
<td style="text-align:left">0.531855</td>
<td style="text-align:left">0.312737</td>
</tr>
</tbody>
</table>
<p>对 A 列求和与标准差，对 B 列求均值与标准差。</p>
<p>In [64]:</p>
<pre><code>r.agg({&#39;A&#39;: [&#39;sum&#39;, &#39;std&#39;], &#39;B&#39;: [&#39;mean&#39;, &#39;std&#39;]})

</code></pre><p>Out[64]:</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">A</th>
<th style="text-align:left">B</th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right"></td>
<td style="text-align:left">sum</td>
<td style="text-align:left">std</td>
<td style="text-align:left">mean</td>
<td style="text-align:left">std</td>
</tr>
<tr>
<td style="text-align:right">2018-10-31</td>
<td style="text-align:left">15.831843</td>
<td style="text-align:left">0.284486</td>
<td style="text-align:left">0.503013</td>
<td style="text-align:left">0.272411</td>
</tr>
<tr>
<td style="text-align:right">2018-11-30</td>
<td style="text-align:left">16.388360</td>
<td style="text-align:left">0.319620</td>
<td style="text-align:left">0.484918</td>
<td style="text-align:left">0.301132</td>
</tr>
<tr>
<td style="text-align:right">2018-12-31</td>
<td style="text-align:left">17.184591</td>
<td style="text-align:left">0.310248</td>
<td style="text-align:left">0.458809</td>
<td style="text-align:left">0.328539</td>
</tr>
<tr>
<td style="text-align:right">2019-01-31</td>
<td style="text-align:left">4.254840</td>
<td style="text-align:left">0.312737</td>
<td style="text-align:left">0.505161</td>
<td style="text-align:left">0.259380</td>
</tr>
</tbody>
</table>
<h3 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h3><p>本章节介绍了 Pandas 对时间序列数据的基本处理操作。重点演示了时间的创建、时间索引对象的处理、时间的相关计算。当然，文中对这些方法的介绍依然还不够详细。如果你需要在实际工作中进行更复杂的时间数据处理，还需要深刻理解文中的基本演示，改编或组合出更高级的功能，这样才能发挥出 Pandas 的强大作用。</p>
<p><strong>Markdown</strong> <strong>Code</strong></p>
<p> <em>继续学习</em></p>
<ul>
<li><a href="https://www.shiyanlou.com/courses/906" target="_blank" rel="noopener"> <em>Pandas 数据处理基础课程</em></a></li>
</ul>
<p>©️ 本课程内容，由作者授权实验楼发布，未经允许，禁止转载、下载及非法传播。</p>

            </div>
            <hr>

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            <div class="reprint">
                <p>
                    <span class="reprint-tip">
                        <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;转载请注明:
                    </span>
                    <a href="http://yoursite.com" class="b-link-green">星晴</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/2019/11/16/pandas-shi-jian-xu-lie-shu-ju-chu-li/" class="b-link-green">Pandas 时间序列数据处理</a>
                </p>
            </div>
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2019/11/16/pandas-shu-ju-chu-li-ji-chu/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="Pandas数据处理基础">
                        
                        <span class="card-title">Pandas数据处理基础</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">Pandas数据处理基础
介绍Pandas 是非常著名的开源数据处理库，我们可以通过它完成对数据集进行快速读取、转换、过滤、分析等一系列操作。除此之外，Pandas 拥有强大的缺失数据处理与数据透视功能，可谓是数据预处理中的必备利器。
知识</div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2019-11-16
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-user fa-fw"></i>
                            starjian
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/机器学习/" target="_blank">
                        <span class="chip bg-color">机器学习</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2019/11/16/pandas-bai-ti-da-chong-guan/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="Pandas 百题大冲关">
                        
                        <span class="card-title">Pandas 百题大冲关</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">Pandas 百题大冲关

Pandas 是基于 NumPy 的一种数据处理工具，该工具为了解决数据分析任务而创建。Pandas 纳入了大量库和一些标准的数据模型，提供了高效地操作大型数据集所需的函数和方法。
Pandas 的数据结构：Pa</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2019-11-16
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-user fa-fw"></i>
                            starjian
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/机器学习/" target="_blank">
                        <span class="chip bg-color">机器学习</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fa fa-list"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            本站由&copy;<a href="https://blinkfox.github.io/" target="_blank">Blinkfox</a>基于
            <a href="https://hexo.io/" target="_blank">Hexo</a> 的
            <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>主题搭建.

            

            
			
                <br>
                
                <span id="busuanzi_container_site_pv">
                    <i class="fa fa-heart-o"></i>
                    本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    <i class="fa fa-users"></i>
                    次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
                </span>
                
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:xxx@xx.xx" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=123123123" class="tooltipped" data-tooltip="QQ联系我: 123123123" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->



    <script src="/libs/others/clicklove.js"></script>


    <script async src="/libs/others/busuanzi.pure.mini.js"></script>


</body>
</html>